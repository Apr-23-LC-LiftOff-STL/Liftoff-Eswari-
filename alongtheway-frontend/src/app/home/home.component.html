<div class="container">
  <div class="collapsibles-container">

    <!-- First Collapsible -->
    <div class="collapsible" [ngClass]="{ 'collapsed': isCollapsibleCollapsed }">
      <div class="collapsible-header" (click)="toggleCollapsible()">
        DIRECTIONS <span class="arrow-icon"></span>
      </div>
      <div class="collapsible-content" [ngClass]="{ 'collapsed': isCollapsibleCollapsed }" [ngStyle]="{ 'pointer-events': isCollapsibleCollapsed ? 'none' : 'auto' }">
        <div class="form-container">
          <div class="flex-container margin-between">
            <label for="start-input" class="flex-label">Start Location:</label>
            <div class="weather-group">
              <img id="weather-icon-start-input" class="weather-icon">
              <label id="weather-temp-start-input" class="weather-temp"></label>
            </div>
            <input id="start-input" type="text" [(ngModel)]="startLocation" class="flex-input">
          </div>

          <div id="stopInputs">
            <div *ngFor="let stop of stops; index as i">
              <div class="flex-container">
                <button (click)="removeStop(i)" class="remove-button">Remove</button>
                <div class="weather-group">
                  <img id="weather-icon-stop-input-{{i}}" class="weather-icon">
                  <label id="weather-temp-stop-input-{{i}}" class="weather-temp"></label>
                </div>
                <input id="stop-input-{{i}}" type="text" [(ngModel)]="stop.location" class="flex-input">
              </div>
            </div>
          </div>
          <button href="#" class="add-stop-button" (click)="addStop()">Add stop to your trip</button>

          <div class="flex-container margin-between">
            <label for="end-input" class="flex-label">End Location:</label>
            <div class="weather-group">
              <img id="weather-icon-end-input" class="weather-icon">
              <label id="weather-temp-end-input" class="weather-temp"></label>
            </div>
            <input id="end-input" type="text" [(ngModel)]="endLocation" class="flex-input">
          </div>
          <div class="button-container">
            <button class="submit-button" (click)="submitForm()">Submit</button>
          </div>
        </div>
      </div>
    </div>

    <!-- Second Collapsible -->
    <div class="collapsible" [ngClass]="{ 'collapsed': isSecondCollapsibleCollapsed }">
      <div class="collapsible-header" (click)="toggleSecondCollapsible()">
        ROUTE DATA / GAS CALCULATOR <span class="arrow-icon"></span>
      </div>
      <div class="collapsible-content" [ngClass]="{ 'collapsed': isSecondCollapsibleCollapsed }" [ngStyle]="{ 'pointer-events': isSecondCollapsibleCollapsed ? 'none' : 'auto' }">
        <div class="form-container">
          <h2 class="collapsible-title">Route Data</h2>

          <div class="flex-container margin-between">
            <label class="flex-label">Total Distance:</label>
            <div class="flex-value-box">{{ distanceInMetersToMiles() }}</div>
          </div>

          <div class="flex-container margin-between">
            <label class="flex-label">Total Drive Time:</label>
            <div class="flex-value-box">{{ calculateDriveTime() }}</div>
          </div>

          <h2 class="collapsible-title">Gas Calculator</h2>

          <div class="flex-container margin-between">
            <label for="average-mpg-input" class="flex-label">Average MPG:</label>
            <input #mpgInput id="average-mpg-input" type="number" min="0" [(ngModel)]="averageMPG" class="flex-input">
          </div>

          <div class="flex-container margin-between">
            <label for="tank-capacity-input" class="flex-label">Tank Capacity (Gallons):</label>
            <input #tankInput id="tank-capacity-input" type="number" min="0" [(ngModel)]="tankCapacity" class="flex-input">
          </div>

          <div class="flex-container margin-between">
            <label for="gas-price-input" class="flex-label">Gas Price (Gallon):</label>
            <div class="input-with-text">
              <span class="input-text">$</span>
              <input #gasPriceInput id="gas-price-input" type="number" min="0" [(ngModel)]="gallonGasPriceString" class="flex-input">
            </div>
          </div>

          <div class="flex-container margin-between">
            <label class="flex-label">Total Gas Cost:</label>
            <div class="flex-value-box">{{ calculateTotalGasCost() }}</div>
          </div>

          <div class="flex-container margin-between">
            <label class="flex-label">Gallons of Gas Needed:</label>
            <div class="flex-value-box">{{ calculateTotalGallons() }}</div>
          </div>

          <div class="flex-container margin-between">
            <label class="flex-label">Fill Ups Needed:</label>
            <div class="flex-value-box">{{ calculateTanksNeeded() }}</div>
          </div>
        </div>
      </div>
    </div>

    <!-- Third Collapsible -->
    <div class="collapsible" [ngClass]="{ 'collapsed': isThirdCollapsibleCollapsed }">
      <div class="collapsible-header" (click)="toggleThirdCollapsible()">
        PLACES SEARCH <span class="arrow-icon"></span>
      </div>
      <div class="collapsible-content" [ngClass]="{ 'collapsed': isThirdCollapsibleCollapsed }" [ngStyle]="{ 'pointer-events': isThirdCollapsibleCollapsed ? 'none' : 'auto' }">
        <div class="form-container">
          <div class="flex-container">
            <label for="interest-input" class="flex-label">Place Types to Search:</label>
            <select id="interest-input" [(ngModel)]="interest" class="flex-input">
              <option value="restaurant">Restaurants</option>
              <option value="museum">Museum</option>
              <option value="park">Park</option>
              <!-- more options... -->
            </select>
          </div>
        </div>


        <div class="searchresults">
          <div class="button-container">
            <button class="submit-button" (click)="searchPlacesAlongRoute()">Search</button>
          </div>
          <h2 class="collapsible-title">Search Results</h2>
          <h2 class="collapsible-title">This is fake data so that I can improve formatting without making a bunch of API calls</h2>
          <ul class="list-items">
<!--            <li *ngFor="let place of places; let i = index">-->
<!--              #{{ i + 1 }} - {{ place.name }} (Rating: {{ place.rating }} - Reviews: {{ place.user_ratings_total }})<br>-->
<!--              Address: {{ place.vicinity }}, {{ getAddressComponent(place.address_components) }}-->
<!--            </li>-->
            <li class="list-item">
              <div class="list-content">
                #1 - Blues City Deli (Rating: 4.9 - Reviews: 2165)<br>
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2438 McNair Avenue, St. Louis, MO
              </div>
              <button class="list-button">Save</button>
            </li>
            <li>#2 - Popeye's Chop House (Rating: 4.8 - Reviews: 1155)<br>
              Address: 17910 Saint Rose Road, Breese</li>
            <li>#3 - Wally's Drive-In (Rating: 4.8 - Reviews: 940)<br>
              Address: 711 North 4th Street, Breese</li>
            <li>#4 - Hank's Bowl Inc Lounge and Restaurant (Rating: 4.8 - Reviews: 139)<br>
              Address: 29 West Illinois Street, Trenton</li>
            <li>#5 - Mike's Place Bar and Grill (Rating: 4.8 - Reviews: 222)<br>
              Address: 100 Main Street, Summerfield</li>
            <li>#6 - Pappy's Smokehouse (Rating: 4.7 - Reviews: 7588)<br>
              Address: 3106 Olive Street, St. Louis</li>
            <li>#7 - Bogart's Smokehouse (Rating: 4.7 - Reviews: 1820)<br>
              Address: 1627 South 9th Street, St. Louis</li>
            <li>#8 - The Fountain on Locust (Rating: 4.7 - Reviews: 2697)<br>
              Address: 3037 Locust Street, St. Louis</li>
            <li>#9 - Dairy King (Rating: 4.6 - Reviews: 1021)<br>
              Address: 691 North 4th Street, Breese</li>
            <li>#10 - Mexico Tipico (Rating: 4.6 - Reviews: 585)<br>
              Address: 501 South Madison Street, Lebanon</li>
            <li>#11 - Dairy King (Rating: 4.6 - Reviews: 1149)<br>
              Address: 320 West Broadway, Trenton</li>
            <li>#12 - Mexico On Main (Rating: 4.6 - Reviews: 347)<br>
              Address: 10 South Main Street, Trenton</li>
            <li>#13 - Broadway Oyster Bar (Rating: 4.6 - Reviews: 7113)<br>
              Address: 736 South Broadway, St. Louis</li>
            <li>#14 - John D. McGurk's Irish Pub and Garden (Rating: 4.6 - Reviews: 2993)<br>
              Address: 1200 Russell Boulevard, St. Louis</li>
            <li>#15 - Lemp Mansion (Rating: 4.6 - Reviews: 1544)<br>
              Address: 3322 Demenil Place, St. Louis</li>
            <li>#16 - Eleven Eleven Mississippi (Rating: 4.6 - Reviews: 1378)<br>
              Address: 1111 Mississippi Avenue, St. Louis</li>
            <li>#17 - Millside Inn (Rating: 4.5 - Reviews: 147)<br>
              Address: 501 Main Street, Germantown</li>
            <li>#18 - P J's Diner (Rating: 4.5 - Reviews: 513)<br>
              Address: 560 North 4th Street, Breese</li>
            <li>#19 - 7 West Bar & Grill (Rating: 4.5 - Reviews: 332)<br>
              Address: 7 West Broadway, Trenton</li>
            <li>#20 - Trenton House (Rating: 4.5 - Reviews: 380)<br>
              Address: 2 East Broadway, Trenton</li>
            <li>#21 - Texas Roadhouse (Rating: 4.5 - Reviews: 3536)<br>
              Address: 1412 Central Park Circle, O'Fallon</li>
            <li>#22 - Andrias Steakhouse (Rating: 4.5 - Reviews: 589)<br>
              Address: 6805 Old Collinsville Road, O'Fallon</li>
            <li>#23 - Global Brew Tap House (Rating: 4.5 - Reviews: 622)<br>
              Address: 455 Regency Park B, O'Fallon</li>
            <li>#24 - The Schlafly Tap Room (Rating: 4.5 - Reviews: 1239)<br>
              Address: 2100 Locust Street, St. Louis</li>
            <li>#25 - Bridge Tap House & Wine Bar (Rating: 4.5 - Reviews: 914)<br>
              Address: 1004 Locust Street, St. Louis</li>
            <li>#26 - Hodak's Restaurant & Bar (Rating: 4.5 - Reviews: 5033)<br>
              Address: 2100 Gravois Avenue, St. Louis</li>
            <li>#27 - Square One Brewery & Distillery (Rating: 4.5 - Reviews: 715)<br>
              Address: 1727 Park Avenue, St. Louis</li>
            <li>#28 - BB's Jazz, Blues and Soups (Rating: 4.5 - Reviews: 1402)<br>
              Address: 700 South Broadway, St. Louis</li>
            <li>#29 - The Shaved Duck Smokehouse (Rating: 4.5 - Reviews: 2692)<br>
              Address: 2900 Virginia Avenue, St. Louis</li>
            <li>#30 - El Arado (Rating: 4.4 - Reviews: 366)<br>
              Address: 50 North 4th Street, Breese</li>
            <li>#31 - Three Sixty (Rating: 4.4 - Reviews: 2220)<br>
              Address: 1 South Broadway, St. Louis</li>
            <li>#32 - SqWires Restaurant & Market (Rating: 4.4 - Reviews: 1235)<br>
              Address: 1415 South 18th Street, St. Louis</li>
            <li>#33 - Gridiron Grill (Rating: 4.3 - Reviews: 169)<br>
              Address: 259 North Main Street, Breese</li>
            <li *ngIf="loading">Loading... <span class="loading"></span></li>
          </ul>
          <div class="button-container">
            <button class="submit-button" (click)="searchPlacesAlongRoute()">Search</button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Map Container -->
  <div id="map" class="map-container"></div>

</div>
